{"version":3,"sources":["scripts/app-20413d4745.js"],"names":["angular","module","noosferoProfileImageBlock","ProfileImageBlockController","vm","this","profile","owner","directive","restrict","templateUrl","scope","block","controller","controllerAs","bindToController","noosferoMainBlock","MainBlockController","noosferoLinkListBlock","LinkListBlockController","links","settings","noosferoBlog","BlogController","article","noosferoArticle","$injector","$compile","ArticleController","link","element","specificDirective","type","has","directiveName","replace","toLowerCase","replaceWith","$inject","noosferoActivity","ActivityController","getActivityTemplate","activity","verb","noosferoBoxes","BoxesController","boxesOrder","box","position","boxes","noosferoBlock","blockName","noosferoActivities","activities","factory","Restangular","profiles","service","profileId","one","filter","text","options","option","acmeNavbar","NavbarController","moment","$modal","AuthService","Session","$scope","$state","AUTH_EVENTS","relativeDate","creationDate","fromNow","currentUser","getCurrentUser","modalInstance","openLogin","open","logout","go","current","reload","$on","loginSuccess","close","logoutSuccess","$q","$http","$rootScope","$log","login","credentials","url","encodedData","username","password","post","then","loginSuccessCallback","loginFailedCallback","loginFromCookie","response","debug","create","data","$broadcast","loginFailed","destroy","undefined","jsonp","isAuthenticated","userId","isAuthorized","authorizedRoles","isArray","indexOf","userRole","$localStorage","user","AuthController","noosfero","$stateParams","ProfileInfoController","activate","id","get","result","ProfileController","identifier","MainController","ContentViewerController","path","page","articles","runBlock","addFullRequestInterceptor","operation","route","headers","private_token","run","routeConfig","$stateProvider","$urlRouterProvider","when","state","resolve","otherwise","config","constant","$logProvider","$locationProvider","RestangularProvider","$httpProvider","debugEnabled","html5Mode","enabled","setBaseUrl","defaults","Content-Type","$templateCache","put"],"mappings":"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","file":"scripts/app-20413d4745.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('angular', ['ngAnimate', 'ngCookies', 'ngStorage', 'ngTouch',\n                        'ngSanitize', 'ngMessages', 'ngAria', 'restangular',\n                        'ui.router', 'ui.bootstrap', 'toastr',\n                        'angularMoment', 'angular.filter']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoProfileImageBlock', noosferoProfileImageBlock);\n\n  /** @ngInject */\n  function noosferoProfileImageBlock() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/noosfero-blocks/profile-image/profile-image.html',\n      scope: {\n          block: '=',\n          owner: '='\n      },\n      controller: ProfileImageBlockController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function ProfileImageBlockController() {\n      var vm = this;\n      vm.profile = vm.owner;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoMainBlock', noosferoMainBlock);\n\n  /** @ngInject */\n  function noosferoMainBlock() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/noosfero-blocks/main-block/main-block.html',\n      scope: {\n          block: '=',\n          owner: '='\n      },\n      controller: MainBlockController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function MainBlockController() {\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoLinkListBlock', noosferoLinkListBlock);\n\n  /** @ngInject */\n  function noosferoLinkListBlock() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/noosfero-blocks/link-list/link-list.html',\n      scope: {\n          block: '=',\n          owner: '='\n      },\n      controller: LinkListBlockController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function LinkListBlockController() {\n      var vm = this;\n      vm.links = vm.block.settings.links;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoBlog', noosferoBlog);\n\n  /** @ngInject */\n  function noosferoBlog() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/noosfero-articles/blog/blog.html',\n      scope: {\n          article: '=',\n          profile: '='\n      },\n      controller: BlogController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function BlogController() {\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoArticle', noosferoArticle);\n\n  /** @ngInject */\n  function noosferoArticle($injector, $compile) {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/noosfero-articles/article/article.html',\n      scope: {\n          article: '=',\n          profile: '='\n      },\n      controller: ArticleController,\n      controllerAs: 'vm',\n      bindToController: true,\n      link: function(scope, element) {\n        var specificDirective = 'noosfero'+scope.vm.article.type;\n        if($injector.has(specificDirective+'Directive')) {\n          var directiveName = specificDirective.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n          element.replaceWith($compile('<'+directiveName+' article=\"vm.article\" profile=\"vm.profile\"></'+directiveName+'>')(scope));          \n        }\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function ArticleController() {\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoActivity', noosferoActivity);\n\n  /** @ngInject */\n  function noosferoActivity() {\n    var directive = {\n      restrict: 'E',\n      scope: {\n          activity: '='\n      },\n      templateUrl: 'app/components/noosfero-activities/activity/activity.html',\n      replace: true,\n      controller: ActivityController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n    return directive;\n\n    /** @ngInject */\n    function ActivityController() {\n      var vm = this;\n      vm.getActivityTemplate = function(activity) {\n        return 'app/components/noosfero-activities/activity/' + activity.verb + '.html';\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoBoxes', noosferoBoxes);\n\n  /** @ngInject */\n  function noosferoBoxes() {\n    var directive = {\n      restrict: 'E',\n      scope: {\n          boxes: '=',\n          owner: '='\n      },\n      templateUrl: 'app/components/noosfero-boxes/boxes.html',\n      controller: BoxesController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function BoxesController() {\n      var vm = this;\n\n      vm.boxesOrder = function(box) {\n        if(box.position==2) return 0;\n        return box.position;\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoBlock', noosferoBlock);\n\n  /** @ngInject */\n  function noosferoBlock($compile) {\n    var directive = {\n      restrict: 'E',\n      scope: {\n          block: '=',\n          owner: '='\n      },\n      link: function(scope, element) {\n        var blockName = scope.block.type.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n        element.replaceWith($compile('<noosfero-'+blockName+' block=\"block\" owner=\"owner\"></noosfero-'+blockName+'>')(scope));\n      }\n    };\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('noosferoActivities', noosferoActivities);\n\n  /** @ngInject */\n  function noosferoActivities() {\n    var directive = {\n      restrict: 'E',\n      scope: {\n          activities: '='\n      },\n      templateUrl: 'app/components/noosfero-activities/activities.html'\n    };\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  \n  angular.module('angular').factory('noosfero', function(Restangular) {\n    return {\n      profiles: Restangular.service('profiles'),\n      boxes: function(profileId) {\n        return Restangular.service('boxes', Restangular.one('profiles', profileId))\n      }\n    }\n  });\n})();\n\n(function() {\n  'use strict';\n  angular\n    .module(\"angular\")\n    .filter(\"noosferoTemplateFilter\", function() {\n      return function(text, options) {\n        for(var option in options) {\n          text = text.replace('{'+option+'}', options[option]);\n        }\n        return text;\n      }\n    })\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          creationDate: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(moment, $modal, AuthService, Session, $scope, $state, AUTH_EVENTS) {\n      var vm = this;\n\n      // \"vm.creation\" is avaible by directive option \"bindToController: true\"\n      vm.relativeDate = moment(vm.creationDate).fromNow();\n      vm.currentUser = Session.getCurrentUser();\n      vm.modalInstance = null;\n\n      vm.openLogin = function() {\n        vm.modalInstance = $modal.open({\n          templateUrl: 'app/components/auth/login.html',\n          controller: 'AuthController',\n          controllerAs: 'vm',\n          bindToController: true\n        });\n      };\n      vm.logout = function() {\n        AuthService.logout();\n        $state.go($state.current, {}, {reload: true});  //TODO move to auth\n      };\n      $scope.$on(AUTH_EVENTS.loginSuccess, function() {\n        if(vm.modalInstance) {\n          vm.modalInstance.close();\n          vm.modalInstance = null;\n        }\n        $state.go($state.current, {}, {reload: true}); //TODO move to auth\n      });\n      $scope.$on(AUTH_EVENTS.logoutSuccess, function() {\n        vm.currentUser = Session.getCurrentUser();\n      });\n\n      if(!vm.currentUser) vm.openLogin();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .factory('Session', Session)\n    .factory('AuthService', AuthService);\n\n  /** @ngInject */\n  function AuthService($q, $http, $rootScope, Session, $log, AUTH_EVENTS) {\n\n    function login (credentials) {\n      var url = '/api/v1/login';\n      var encodedData = 'login=' + credentials.username + '&password=' + credentials.password;\n      return $http.post(url, encodedData).then(loginSuccessCallback, loginFailedCallback);\n    }\n\n    function loginFromCookie() {\n      var url = '/api/v1/login_from_cookie';\n      return $http.post(url).then(loginSuccessCallback, loginFailedCallback);\n    }\n    \n    function loginSuccessCallback(response) {\n      $log.debug('AuthService.login [SUCCESS] response', response);\n      var currentUser = Session.create(response.data);\n      $rootScope.currentUser = currentUser;\n      $rootScope.$broadcast(AUTH_EVENTS.loginSuccess, currentUser);\n      return currentUser;\n    }\n    \n    function loginFailedCallback(response) {\n      $log.debug('AuthService.login [FAIL] response', response);\n      $rootScope.$broadcast(AUTH_EVENTS.loginFailed);\n      // return $q.reject(response);\n      return null;\n    }\n\n    function logout () {\n      Session.destroy();\n      $rootScope.currentUser = undefined;\n      $rootScope.$broadcast(AUTH_EVENTS.logoutSuccess);\n      $http.jsonp('/account/logout'); //FIXME logout from noosfero to sync login state\n    }\n\n    function isAuthenticated () {\n      return !!Session.userId;\n    }\n\n    function isAuthorized (authorizedRoles) {\n      if (!angular.isArray(authorizedRoles)) {\n        authorizedRoles = [authorizedRoles];\n      }\n      return (service.isAuthenticated() && authorizedRoles.indexOf(Session.userRole) !== -1);\n    }\n\n    var service = {\n      login: login,\n      loginFromCookie: loginFromCookie,\n      logout: logout,\n      isAuthenticated: isAuthenticated,\n      isAuthorized: isAuthorized\n    };\n    return service;\n  }\n\n  /** @ngInject */\n  function Session($localStorage, $log) {\n    var service = {};\n\n    service.create = function(data) {\n      $localStorage.currentUser = data.user;\n      $log.debug('User session created.', $localStorage.currentUser);\n      return $localStorage.currentUser;\n    };\n\n    service.destroy = function() {\n      delete $localStorage.currentUser;\n      $log.debug('User session destroyed.');\n    };\n\n    service.getCurrentUser = function () {\n      return $localStorage.currentUser;\n    };\n\n    return service;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .controller('AuthController', AuthController);\n\n\n  /** @ngInject */\n  function AuthController(noosfero, $log, $stateParams, AuthService) {\n    var vm = this;\n    vm.credentials = {};\n    vm.login = function() {\n      AuthService.login(vm.credentials);\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .controller('ProfileInfoController', ProfileInfoController);\n\n\n  /** @ngInject */\n  function ProfileInfoController(noosfero, $log, $stateParams, $scope) {\n    var vm = this;\n    vm.profile = null;\n    vm.activities = [];\n    activate();\n\n    function activate() {\n      vm.profile = $scope.vm.owner;\n      noosfero.profiles.one(vm.profile.id).one('activities').get().then(function(result) {\n        vm.activities = result.activities;\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .controller('ProfileController', ProfileController);\n\n\n  /** @ngInject */\n  function ProfileController(noosfero, $log, $stateParams) {\n    var vm = this;\n    vm.boxes = [];\n    activate();\n\n    function activate() {\n      noosfero.profiles.one().get({identifier: $stateParams.profile}).then(function(profiles) {\n        vm.profile = profiles[0];\n        return noosfero.boxes(vm.profile.id).one().get();\n      }).then(function(response) {\n        vm.boxes = response.boxes;\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .controller('MainController', MainController);\n\n\n  /** @ngInject */\n  function MainController() {\n    \n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .controller('ContentViewerController', ContentViewerController);\n\n\n  /** @ngInject */\n  function ContentViewerController(noosfero, $log, $stateParams, $scope) {\n    var vm = this;\n    vm.article = null;\n    vm.profile = null;\n    activate();\n\n    function activate() {\n      vm.profile = $scope.vm.owner;\n      noosfero.profiles.one(vm.profile.id).one('articles').get({path: $stateParams.page}).then(function(articles) {\n        vm.article = articles.article;\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log, Restangular, Session) {\n    Restangular.addFullRequestInterceptor(function(element, operation, route, url, headers) {\n      if(Session.getCurrentUser()) {\n        headers['Private-Token'] = Session.getCurrentUser().private_token;\n      }\n      return { headers: headers };\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .config(routeConfig);\n\n  function routeConfig($stateProvider, $urlRouterProvider) {\n    $urlRouterProvider.when('/:profile', '/profile/:profile');\n    $stateProvider\n      .state('main', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'vm',\n        resolve: {\n          currentUser: function(AuthService) {\n            return AuthService.loginFromCookie();\n          }\n        }\n      })\n      .state('main.profile', {\n        url: ':profile',\n        templateUrl: 'app/profile/profile.html',\n        controller: 'ProfileController',\n        controllerAs: 'vm'\n      })\n      .state('main.profile.info', {\n        url: '^/profile/:profile',\n        templateUrl: 'app/profile-info/profile-info.html',\n        controller: 'ProfileInfoController',\n        controllerAs: 'vm'\n      })\n      .state('main.profile.page', {\n        url: '/{page:.*}',\n        templateUrl: 'app/content-viewer/page.html',\n        controller: 'ContentViewerController',\n        controllerAs: 'vm'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .constant('moment', moment)\n    .constant('AUTH_EVENTS', {\n      loginSuccess: 'auth-login-success',\n      loginFailed: 'auth-login-failed',\n      logoutSuccess: 'auth-logout-success'\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angular')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, $locationProvider, RestangularProvider, $httpProvider) {\n    $logProvider.debugEnabled(true);\n    $locationProvider.html5Mode({enabled: true});\n    RestangularProvider.setBaseUrl('/api/v1');\n    $httpProvider.defaults.headers.post = {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8'};\n  }\n\n})();\n\nangular.module(\"angular\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/content-viewer/page.html\",\"<noosfero-article ng-if=\\\"vm.article\\\" article=\\\"vm.article\\\" profile=\\\"vm.profile\\\"></noosfero-article>\");\n$templateCache.put(\"app/main/main.html\",\"<acme-navbar></acme-navbar><div ui-view=\\\"\\\"></div>\");\n$templateCache.put(\"app/profile/profile.html\",\"<div class=\\\"profile-container\\\"><div class=\\\"row\\\"><noosfero-boxes boxes=\\\"vm.boxes\\\" owner=\\\"vm.profile\\\"></noosfero-boxes></div></div>\");\n$templateCache.put(\"app/profile-info/profile-info.html\",\"<h3>{{vm.profile.name}}</h3><div class=\\\"profile-wall\\\"><h4>Profile Wall</h4><noosfero-activities activities=\\\"vm.activities\\\"></noosfero-activities></div>\");\n$templateCache.put(\"app/components/auth/login.html\",\"<div class=\\\"modal-header\\\"><h3 class=\\\"modal-title\\\">Login</h3></div><div class=\\\"modal-body\\\"><form><div class=\\\"form-group\\\"><label for=\\\"exampleInputEmail1\\\">Login / Email address</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"exampleInputEmail1\\\" placeholder=\\\"Login / Email\\\" ng-model=\\\"vm.credentials.username\\\"></div><div class=\\\"form-group\\\"><label for=\\\"exampleInputPassword1\\\">Password</label> <input type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"exampleInputPassword1\\\" placeholder=\\\"Password\\\" ng-model=\\\"vm.credentials.password\\\"></div><button type=\\\"submit\\\" class=\\\"btn btn-default\\\" ng-click=\\\"vm.login()\\\">Login</button></form></div>\");\n$templateCache.put(\"app/components/boxes/boxes.html\",\"{{vm.boxesOrder}} {{boxesOrder}}<ng-include ng-repeat=\\\"box in vm.boxes | orderBy: vm.boxesOrder\\\" src=\\\"\\'app/components/noosfero-boxes/box.html\\'\\\"></ng-include>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-static-top navbar-inverse\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" ng-click=\\\"isCollapsed = !isCollapsed\\\"><span class=\\\"sr-only\\\">Toggle navigation</span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button> <a class=\\\"navbar-brand\\\" ng-href=\\\"/\\\"><span class=\\\"noosfero-logo\\\"><img src=\\\"/designs/themes/angular-theme/dist/assets/images/logo-noosfero.png\\\"></span> Noosfero</a></div><div class=\\\"collapse navbar-collapse\\\" id=\\\"navbar-collapse\\\" collapse=\\\"isCollapsed\\\"><ul class=\\\"nav navbar-nav\\\"></ul><ul class=\\\"nav navbar-nav navbar-right\\\"><li ng-show=\\\"!vm.currentUser\\\"><a ng-href=\\\"#\\\" ng-click=\\\"vm.openLogin()\\\">Login</a></li><li class=\\\"dropdown profile-menu\\\" ng-show=\\\"vm.currentUser\\\" dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" aria-expanded=\\\"false\\\" dropdown-toggle=\\\"\\\"><i ng-if=\\\"!vm.currentUser.person.image\\\" class=\\\"fa fa-user\\\"></i> <img ng-if=\\\"vm.currentUser.person.image\\\" ng-src=\\\"{{vm.currentUser.person.image.url}}\\\" class=\\\"profile-image\\\"> <span ng-bind=\\\"vm.currentUser.person.name\\\"></span> <b class=\\\"caret\\\"></b></a><ul class=\\\"dropdown-menu\\\" dropdown-menu=\\\"\\\"><li><a ng-href=\\\"/{{vm.currentUser.person.identifier}}\\\"><i class=\\\"fa fa-fw fa-user\\\"></i> Profile</a></li><li><a target=\\\"_self\\\" ng-href=\\\"/myprofile/{{vm.currentUser.person.identifier}}\\\"><i class=\\\"fa fa-fw fa-gear\\\"></i> Settings</a></li><li class=\\\"divider\\\"></li><li><a href=\\\"#\\\" ng-click=\\\"vm.logout()\\\"><i class=\\\"fa fa-fw fa-power-off\\\"></i> Log Out</a></li></ul></li></ul></div></div></nav>\");\n$templateCache.put(\"app/components/noosfero-activities/activities.html\",\"<ul class=\\\"timeline\\\"><li ng-class-even=\\\"\\'timeline-inverted\\'\\\" ng-repeat=\\\"activity in activities | orderBy: \\'created_at\\':true\\\"><noosfero-activity activity=\\\"activity\\\"></noosfero-activity></li></ul>\");\n$templateCache.put(\"app/components/noosfero-boxes/box.html\",\"<div ng-class=\\\"{\\'col-md-2-5\\': box.position!=1, \\'col-md-7\\': box.position==1}\\\"><div ng-repeat=\\\"block in box.blocks | orderBy: \\'position\\'\\\" class=\\\"panel panel-default block\\\"><div class=\\\"panel-heading\\\" ng-show=\\\"block.title\\\"><h3 class=\\\"panel-title\\\">{{block.title}}</h3></div><div class=\\\"panel-body\\\"><noosfero-block block=\\\"block\\\" owner=\\\"vm.owner\\\"></noosfero-block></div></div></div>\");\n$templateCache.put(\"app/components/noosfero-boxes/boxes.html\",\"<ng-include ng-repeat=\\\"box in vm.boxes | orderBy: vm.boxesOrder\\\" src=\\\"\\'app/components/noosfero-boxes/box.html\\'\\\"></ng-include>\");\n$templateCache.put(\"app/components/noosfero-activities/activity/activity.html\",\"<div class=\\\"activity\\\"><ng-include src=\\\"vm.getActivityTemplate(vm.activity)\\\"></ng-include></div>\");\n$templateCache.put(\"app/components/noosfero-activities/activity/add_member_in_community.html\",\"<div class=\\\"timeline-badge info\\\"><i class=\\\"fa fa-user-plus\\\"></i></div><div class=\\\"timeline-panel\\\"><div class=\\\"timeline-heading\\\"><h4 class=\\\"timeline-title\\\"><strong ng-bind=\\\"vm.activity.user.name\\\"></strong> has joined the community</h4><p><small class=\\\"text-muted\\\"><i class=\\\"fa fa-clock-o\\\"></i> <span am-time-ago=\\\"vm.activity.created_at\\\"></span></small></p></div><div class=\\\"timeline-body\\\"></div></div>\");\n$templateCache.put(\"app/components/noosfero-activities/activity/create_article.html\",\"<div class=\\\"timeline-badge success\\\"><i class=\\\"fa fa-file-text\\\"></i></div><div class=\\\"timeline-panel\\\"><div class=\\\"timeline-heading\\\"><h4 class=\\\"timeline-title\\\"><strong ng-bind=\\\"vm.activity.user.name\\\"></strong> has published on community <strong ng-bind=\\\"vm.activity.target.article.profile.name\\\"></strong></h4><p><small class=\\\"text-muted\\\"><i class=\\\"fa fa-clock-o\\\"></i> <span am-time-ago=\\\"vm.activity.created_at\\\"></span></small></p></div><div class=\\\"timeline-body\\\"><div class=\\\"article\\\"><div class=\\\"title\\\"><a ng-href=\\\"/{{vm.activity.target.article.profile.identifier}}/{{vm.activity.target.article.path}}\\\">{{vm.activity.target.article.title}}</a></div><div class=\\\"lead small\\\"><div ng-bind-html=\\\"vm.activity.target.article.body | stripTags | truncate: 100 : \\'...\\'\\\"></div></div></div></div></div>\");\n$templateCache.put(\"app/components/noosfero-articles/article/article.html\",\"<div class=\\\"page-header\\\"><h3 ng-bind=\\\"vm.article.title\\\"></h3></div><div><div ng-bind-html=\\\"vm.article.body\\\"></div></div>\");\n$templateCache.put(\"app/components/noosfero-articles/blog/blog.html\",\"<div class=\\\"blog-cover\\\" ng-show=\\\"vm.article.image\\\"><img ng-src=\\\"{{vm.article.image.url}}\\\" class=\\\"img-responsive\\\"><h3 ng-bind=\\\"vm.article.title\\\"></h3></div><div class=\\\"page-header\\\" ng-show=\\\"!vm.article.image\\\"><h3 ng-bind=\\\"vm.article.title\\\"></h3></div><div><div ng-repeat=\\\"child in vm.article.children | orderBy: \\'created_at\\':true\\\"><div class=\\\"page-header\\\"><a ng-href=\\\"/{{vm.profile.identifier}}/{{child.path}}\\\"><h4 ng-bind=\\\"child.title\\\"></h4></a><div ng-bind-html=\\\"child.body | truncate: 500: \\'...\\'\\\"></div></div></div></div>\");\n$templateCache.put(\"app/components/noosfero-blocks/link-list/link-list.html\",\"<div ng-repeat=\\\"link in vm.links\\\"><a ng-href=\\\"{{link.address | noosferoTemplateFilter:{profile: vm.owner.identifier} }}\\\"><i class=\\\"fa fa-fw icon-{{link.icon}}\\\"></i> <span>{{link.name}}</span></a></div>\");\n$templateCache.put(\"app/components/noosfero-blocks/main-block/main-block.html\",\"<div ui-view=\\\"\\\"></div>\");\n$templateCache.put(\"app/components/noosfero-blocks/profile-image/profile-image.html\",\"<div class=\\\"center-block text-center\\\"><div class=\\\"profile-image\\\"><a ng-href=\\\"/{{vm.owner.identifier}}\\\"><img ng-show=\\\"{{vm.owner.image}}\\\" src=\\\"{{vm.owner.image.url}}\\\" class=\\\"img-responsive\\\"> <i ng-show=\\\"{{!vm.owner.image}}\\\" class=\\\"fa fa-users fa-5x\\\"></i></a></div><div class=\\\"admin-link\\\"><a target=\\\"_self\\\" ng-href=\\\"/myprofile/{{vm.owner.identifier}}\\\">Control panel</a></div></div>\");}]);"],"sourceRoot":"/source/"}