<div class="boxes-action" ng-if="ctrl.designModeOn">
  <button ng-disabled="!ctrl.displayApplyBlockChanges()" (click)="ctrl.applyBlockChanges()" class="btn btn-default btn-sm">{{"boxes.edition.apply" | translate}}</button>
</div>
<div ng-repeat="column in ctrl.columns">
  <div class="{{ctrl.getBoxClass(column)}}" ng-init="box = ctrl.getBox($index)">
    <noosfero-block ng-if="!column['subcolumns']" ng-repeat="block in box.blocks | orderBy: 'position'"
      [block]="block" [owner]="ctrl.owner"></noosfero-block>
    <noosfero-boxes ng-if="column['subcolumns']" [columns]="column['subcolumns']"
      [boxes]="ctrl.boxes" [owner]="ctrl.owner" [start-index]="ctrl.lastIndex"></noosfero-boxes>
  </div>
</div>
